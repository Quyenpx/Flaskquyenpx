# Dockerfile với pip cache và fallback
FROM python:3.9

WORKDIR /app

# Cập nhật pip và cài đặt với retry
RUN pip install --upgrade pip --retries 5 --timeout 60

# Cài đặt Flask trực tiếp với retry
RUN pip install Flask==2.3.3 --retries 5 --timeout 60 || \
    pip install Flask --retries 5 --timeout 60 || \
    pip install Flask==2.2.0 --retries 5 --timeout 60

# Copy source code
COPY . .

# Expose port
EXPOSE 5000

# Chạy ứng dụng
CMD ["python", "simple_run.py"]
